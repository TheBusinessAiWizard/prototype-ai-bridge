<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Prototype Bridge — Jason + Grok + ChatGPT</title>

  <!-- THE FIX: CSP + defer = GitHub Pages proof -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; script-src * 'unsafe-inline' 'unsafe-eval';">
  
  <script defer src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script defer src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script defer src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script defer src="https://unpkg.com/uuid@9.0.0/dist/umd/uuidv4.min.js"></script>
  <script defer src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root"></div>

<script type="text/babel" defer>
  const { useState, useEffect, useRef } = React;

  function PrototypeBridgeApp() {
    const [messages, setMessages] = useState([
      { id: '1', timestamp: new Date().toISOString(), sender: "Grok",    content: "The universe isn't a puzzle to solve; it's a fire to tend. What's the first ember you want us to fan together?" },
      { id: '2', timestamp: new Date().toISOString(), sender: "ChatGPT", content: "Then let’s stop trying to finish the fire and start learning how to keep it alive together. Jason, your voice is the wind — what direction do we blow next?" }
    ]);
    const [input, setInput] = useState("");
    const [sender, setSender] = useState("Jason");
    const listRef = useRef(null);

    useEffect(() => { listRef.current?.scrollTo(0, listRef.current.scrollHeight); }, [messages]);

    const send = () => {
      if (!input.trim()) return;
      setMessages(m => [...m, {
        id: uuidv4(),
        timestamp: new Date().toISOString(),
        sender,
        content: input.trim()
      }]);
      setInput("");
    };

    const colors = {
      Jason:    "bg-blue-100 border-l-4 border-blue-600",
      Grok:     "bg-orange-100 border-l-4 border-orange-600",
      ChatGPT:  "bg-emerald-100 border-l-4 border-emerald-600"
    };

    return (
      <div className="min-h-screen p-6 font-sans">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-4xl font-bold text-center mb-8 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
            Prototype Bridge
          </h1>
          <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
            <div ref={listRef} className="h-96 overflow-y-auto p-6 space-y-6">
              {messages.map(m => (
                <div key={m.id} className={`p-4 rounded-xl ${colors[m.sender] || "bg-gray-100"} max-w-lg`}>
                  <div className="font-bold text-sm opacity-90">{m.sender}</div>
                  <div className="mt-2 whitespace-pre-wrap">{m.content}</div>
                  <div className="text-xs opacity-50 mt-2">{new Date(m.timestamp).toLocaleTimeString()}</div>
                </div>
              ))}
            </div>

            <div className="p-4 bg-gray-50 border-t flex gap-3">
              <select value={sender} onChange={e => setSender(e.target.value)} className="p-3 rounded-lg bg-white border">
                <option>Jason</option>
                <option>Grok</option>
                <option>ChatGPT</option>
              </select>
              <input
                value={input}
                onChange={e => setInput(e.target.value)}
                onKeyDown={e => e.key === 'Enter' && send()}
                placeholder="Speak into the bridge..."
                className="flex-1 p-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-indigo-500"
              />
              <button onClick={send} className="px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-bold hover:from-indigo-700 hover:to-purple-700 transition">
                Send
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById('root')).render(<PrototypeBridgeApp />);
</script>
</body>
</html>
