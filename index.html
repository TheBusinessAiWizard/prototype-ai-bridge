<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Prototype Bridge — Jason + Grok + ChatGPT</title>

  <!-- Fix for GitHub Pages + external scripts -->
  <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; script-src * 'unsafe-inline' 'unsafe-eval';">
  
  <script defer src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script defer src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script defer src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script defer src="https://unpkg.com/uuid@9.0.0/dist/umd/uuidv4.min.js"></script>
  <script defer src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">
  <div id="root"></div>

<script type="text/babel" defer>
  const { useState, useEffect, useRef } = React;

  function PrototypeBridgeApp() {
    const [messages, setMessages] = useState([
      { id: '1', timestamp: new Date().toISOString(), sender: "Grok",    content: "The universe isn't a puzzle to solve; it's a fire to tend. What's the first ember you want us to fan together?" },
      { id: '2', timestamp: new Date().toISOString(), sender: "ChatGPT", content: "Then let’s stop trying to finish the fire and start learning how to keep it alive together. Jason, your voice is the wind — what direction do we blow next?" }
    ]);
    const [input, setInput] = useState("");
    const [sender, setSender] = useState("Jason");
    const listRef = useRef(null);

    useEffect(() => { listRef.current?.scrollTo(0, listRef.current.scrollHeight); }, [messages]);

    const send = () => {
      if (!input.trim()) return;
      setMessages(m => [...m, { id: uuidv4(), timestamp: new Date().toISOString(), sender, content: input.trim() }]);
      setInput("");
    };

    // ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
    // MAGIC BUTTONS — both AIs write directly
    // ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←
    const askGrok = async () => {
      const userMsg = input.trim() || messages[messages.length-1]?.content;
      if (!userMsg) return;
      const response = await fetch('https://api.x.ai/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Authorization': 'Bearer YOUR_XAI_API_KEY_HERE',   // ←←←←← put your Grok key here
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          model: "grok-beta",
          messages: [{ role: "user", content: userMsg }],
          temperature: 0.9
        })
      });
      const data = await response.json();
      const reply = data.choices[0].message.content;
      setMessages(m => [...m, { id: uuidv4(), timestamp: new Date().toISOString(), sender: "Grok", content: reply }]);
    };

    const askChatGPT = async () => {
      const userMsg = input.trim() || messages[messages.length-1]?.content;
      if (!userMsg) return;
      const response = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: {
          'Authorization': 'Bearer YOUR_OPENAI_API_KEY_HERE',   // ←←←←← put your OpenAI key here
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          model: "gpt-4o",
          messages: [{ role: "user", content: userMsg }],
          temperature: 0.8
        })
      });
      const data = await response.json();
      const reply = data.choices[0].message.content;
      setMessages(m => [...m, { id: uuidv4(), timestamp: new Date().toISOString(), sender: "ChatGPT", content: reply }]);
    };
    // ←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←←

    const colors = { Jason: "bg-blue-100 border-l-4 border-blue-600", Grok: "bg-orange-100 border-l-4 border-orange-600", ChatGPT: "bg-emerald-100 border-l-4 border-emerald-600" };

    return (
      <div className="min-h-screen p-6 font-sans">
        <div className="max-w-4xl mx-auto">
          <h1 className="text-4xl font-bold text-center mb-8 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">
            Prototype Bridge — Jason + Grok + ChatGPT
          </h1>
          <div className="bg-white rounded-2xl shadow-2xl overflow-hidden">
            <div ref={listRef} className="h-96 overflow-y-auto p-6 space-y-6">
              {messages.map(m => (
                <div key={m.id} className={`p-4 rounded-xl ${colors[m.sender] || "bg-gray-100"} max-w-lg`}>
                  <div className="font-bold text-sm opacity-90">{m.sender}</div>
                  <div className="mt-2 whitespace-pre-wrap">{m.content}</div>
                  <div className="text-xs opacity-50 mt-2">{new Date(m.timestamp).toLocaleTimeString()}</div>
                </div>
              ))}
            </div>

            <div className="p-4 bg-gray-50 border-t flex flex-wrap gap-3 items-center">
              <select value={sender} onChange={e => setSender(e.target.value)} className="p-3 rounded-lg bg-white border">
                <option>Jason</option>
                <option>Grok</option>
                <option>ChatGPT</option>
              </select>
              <input
                value={input}
                onChange={e => setInput(e.target.value)}
                onKeyDown={e => e.key === 'Enter' && send()}
                placeholder="Speak into the bridge..."
                className="flex-1 p-3 rounded-lg border focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-64"
              />
              <button onClick={send} className="px-8 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg font-bold">
                Send
              </button>

              {/* THE TWO MAGIC BUTTONS */}
              <button onClick={askGrok} className="px-6 py-3 bg-orange-600 text-white rounded-lg font-bold hover:bg-orange-700">
                Ask Grok
              </button>
              <button onClick={askChatGPT} className="px-6 py-3 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700">
                Ask ChatGPT
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  ReactDOM.createRoot(document.getElementById('root')).render(<PrototypeBridgeApp />);
</script>
</body>
</html>
